<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Technical issues &#8212; CASA-Distro - BrainVisa / CATI development distribution</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=808b3635" />
    
    <script src="_static/documentation_options.js?v=4f6ddb47"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Developing in the Casa-Distro BrainVISA environment" href="developer.html" />
    <link rel="prev" title="Casa-distro concepts" href="concepts.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="developer.html" title="Developing in the Casa-Distro BrainVISA environment"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="concepts.html" title="Casa-distro concepts"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CASA-Distro</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Technical issues</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="technical-issues">
<h1>Technical issues<a class="headerlink" href="#technical-issues" title="Link to this heading">¶</a></h1>
<ul class="simple">
<li><p>The <a class="reference external" href="../web-5.0/download.html">BrainVisa download / install section</a> explains how to install casa-distro and a released, compiled, version of BrainVISA. This is what a “regular user” needs.</p></li>
<li><p>Developers can find information on the <a class="reference internal" href="developer.html"><span class="doc">Developing in the Casa-Distro BrainVISA environment</span></a> section.</p></li>
</ul>
<p>This document explains how to setup and use some container systems (Singularity, Docker), and tries to solve some technical issues which can occur when using them.</p>
<section id="home-directory-and-configuration-files-in-casa-distro-containers">
<h2>Home directory and configuration files in casa-distro containers<a class="headerlink" href="#home-directory-and-configuration-files-in-casa-distro-containers" title="Link to this heading">¶</a></h2>
<p>The virtual machine variant of <code class="docutils literal notranslate"><span class="pre">casa-distro</span></code> images (VirtualBox) are self-contained and are using an internal user (<code class="docutils literal notranslate"><span class="pre">brainvisa</span></code> in <a class="reference external" href="http://brainvisa.info">BrainVISA</a> distributions). The remaining of this section thus applies to the container-based variants of <code class="docutils literal notranslate"><span class="pre">casa-distro</span></code> (singularity and docker).</p>
<p>To run the container, <code class="docutils literal notranslate"><span class="pre">casa-distro</span></code> (any of <code class="docutils literal notranslate"><span class="pre">bv</span></code>, <code class="docutils literal notranslate"><span class="pre">casa_distro</span></code> and <code class="docutils literal notranslate"><span class="pre">casa_distro_admin</span></code> commands) is using an <a class="reference internal" href="concepts.html#environment"><span class="std std-ref">environment</span></a> directory on the host filesystem. It is used to read configuration before starting the container, and to store files which may be shared between the container and the host filesystem.</p>
<p>The environment directory may be a personal user installation (if a user installs BrainVisa, or a developer environment, for himself), which we name <em>user environment</em>, or a <em>shared environment</em> (if an administrator installs BrainVisa for all users on a network filesystem, typically). In the first case the user has full access to the environment files (he owns the directory and files), but in the second case the shared environment directory and files belong to the administrator, and are read-only for the user.</p>
<section id="configuration-files">
<h3>Configuration files<a class="headerlink" href="#configuration-files" title="Link to this heading">¶</a></h3>
<p>A first configuration file is read by <code class="docutils literal notranslate"><span class="pre">casa-distro</span></code>, located on the host filesystem at the following location:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&lt;environment_dir&gt;/conf/casa_distro.json
</pre></div>
</div>
<p>which, inside the container, is seen as:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/casa/host/conf/casa_distro.json
</pre></div>
</div>
<p>This environment file is completed by a user file, which is located in the host system user directory, at the following location:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">$HOME</span>/.config/casa-distro/casa_distro_3.json
</pre></div>
</div>
<p>The mount points configured in the <code class="docutils literal notranslate"><span class="pre">bv</span></code> graphical tool are saved in this latter file, which is shared across all environments run by the user.</p>
</section>
<section id="home-directory">
<h3>Home directory<a class="headerlink" href="#home-directory" title="Link to this heading">¶</a></h3>
<p>Containers are running with the same user as the host system user, in order to have the same permissions and identity, especially in regards to files access and ownership. However they are running with a <em>separate user home directory</em>. The reasons is to avoid sharing copnfigs and paths which would be specific to the host system and those for the container, which may be incompatible.</p>
<ul>
<li><p>In “user environments” (those owned by the user with read-write permissions on the environment directory), the container user home directory is located inside the environment directory. On host side, this is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&lt;environment_dir&gt;/home/
</pre></div>
</div>
<p>Inside the container, the same directory is seen under:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/casa/host/home
</pre></div>
</div>
</li>
<li><p>In “shared environments”, the user cannot write in the environment directory, thus the user home directory has to be outside of it. <code class="docutils literal notranslate"><span class="pre">casa-distro</span></code> is using the following location rule:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">$HOME</span>/.local/share/casa-distro/&lt;environment_full_dir&gt;
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;environment_full_dir&gt;</span></code> is obtained by replacing, in the full path of the environment directory, directory separators (<code class="docutils literal notranslate"><span class="pre">/</span></code> on Unix systems or <code class="docutils literal notranslate"><span class="pre">\</span></code> on Windows systems) by underscores (<code class="docutils literal notranslate"><span class="pre">_</span></code>). Ex:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/opt/brainvisa/brainvisa-5.0.0<span class="w">  </span>-&gt;<span class="w">  </span><span class="nv">$HOME</span>/.local/share/casa-distro/opt_brainvisa_brainvisa-5.0.0
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="containers-and-distributed-execution">
<h2>Containers and distributed execution<a class="headerlink" href="#containers-and-distributed-execution" title="Link to this heading">¶</a></h2>
<p><a class="reference external" href="http://brainvisa.info">BrainVISA</a> can perform distributed execution, using <a class="reference external" href="../soma-workflow-1.0/sphinx/index.html">Soma-Workflow</a>.</p>
<p>in an installed <a class="reference internal" href="concepts.html#environment"><span class="std std-ref">environment</span></a>, commands are also available via “run scripts”, located in <code class="docutils literal notranslate"><span class="pre">&lt;environment&gt;/host/bin/</span></code>. If this directory is in the computing resource nodes <code class="docutils literal notranslate"><span class="pre">PATH</span></code> environment variable, then the commands will run the container transparently.</p>
<p>Alternately, soma-workflow 3.1 brings support to spawn Docker or Singularity (or casa_distro) in remote processing. However it needs some additional configuration on server side to specify how to run the containers.</p>
<p>For commands run directly through the <code class="docutils literal notranslate"><span class="pre">python</span></code> command, more work will be required because the system <code class="docutils literal notranslate"><span class="pre">python</span></code> is, of course, not overloaded in BrainVISA/Casa run scripts.</p>
<p>Please read <a class="reference external" href="../soma-workflow-1.0/sphinx/install_config.html#running-servers-and-jobs-in-a-container">Soma-Workflow documentation about it</a>.</p>
<p>Remember that software running that way live in a container, which is more or less isolated from the host system. To access data, casa_distro will likeky need additional directories mount options. It can be specified on <code class="docutils literal notranslate"><span class="pre">casa_distro</span></code> commandline, or in the file <code class="docutils literal notranslate"><span class="pre">container_options</span></code> item in <code class="docutils literal notranslate"><span class="pre">&lt;casa_distro_environment&gt;/host/conf/casa_distro.json</span></code>.</p>
</section>
<section id="developing-in-containers">
<h2>Developing in containers<a class="headerlink" href="#developing-in-containers" title="Link to this heading">¶</a></h2>
<p>See also the BrainVisa developers site: <a class="reference external" href="https://brainvisa.github.io/">https://brainvisa.github.io/</a></p>
<section id="using-git">
<h3>Using Git<a class="headerlink" href="#using-git" title="Link to this heading">¶</a></h3>
<p>Both git and svn are used in Brainvisa projects sources. svn will probably be completely replaced with git.</p>
<p>git URLs use https by default. It’s OK for anonymous download and update, but they require manual authentication for each push, thus it’s painful. If you have a github account, you can use ssh with a ssh key instead. See <a class="reference external" href="https://brainvisa.github.io/contributing.html">https://brainvisa.github.io/contributing.html</a></p>
<p>Once done git will automatically use ssh. But then ssh needs to be working…</p>
</section>
<section id="using-ssh">
<h3>Using ssh<a class="headerlink" href="#using-ssh" title="Link to this heading">¶</a></h3>
<p>git and ssh may be used either on the host side (since sources are actually stored on the host filesystem), or within the container. As users may have ssh keys and have already registered them in GitHub, they will want to reuse their host ssh keys.</p>
<p>On Linux (or Mac) hosts, it is possible.</p>
<p>Singularity 3 does not allow to mount the host <code class="docutils literal notranslate"><span class="pre">.ssh</span></code> directory into the already mounted container home directory. So there are 2 other options:</p>
<ol class="arabic">
<li><p>copy the host <code class="docutils literal notranslate"><span class="pre">.ssh</span></code> directory into the container home:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>-a<span class="w"> </span><span class="s2">&quot;/host/</span><span class="nv">$CASA_HOST_HOME</span><span class="s2">/.ssh&quot;</span><span class="w"> </span>~/
</pre></div>
</div>
<p>But copying private ssh keys is not recommended for security reasons.</p>
</li>
<li><dl>
<dt>use a ssh agent:</dt><dd><ul>
<li><p>install <code class="docutils literal notranslate"><span class="pre">keychain</span></code>. On debian-based Linux distributions, this is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>keychain
</pre></div>
</div>
</li>
<li><p>add in your host <code class="docutils literal notranslate"><span class="pre">$HOME/.bash_profile</span></code> file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">eval</span><span class="w"> </span><span class="k">$(</span>keychain<span class="w"> </span>--eval<span class="w"> </span>--agents<span class="w"> </span>ssh<span class="w"> </span>id_rsa<span class="k">)</span>
</pre></div>
</div>
</li>
</ul>
</dd>
</dl>
</li>
</ol>
</section>
</section>
<section id="troubleshooting">
<span id="id1"></span><h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading">¶</a></h2>
<p>Typical problems are listed here.</p>
<section id="opengl-is-not-working-or-is-slow">
<span id="opengl-troubleshooting"></span><h3>OpenGL is not working, or is slow<a class="headerlink" href="#opengl-is-not-working-or-is-slow" title="Link to this heading">¶</a></h3>
<section id="with-docker">
<h4>with docker<a class="headerlink" href="#with-docker" title="Link to this heading">¶</a></h4>
<p>Several options are needed to enable display and OpenGL. Normally casa_distro tries to set them up and should do the best it can.</p>
<p>On machines with nvidia graphics cards and nvidia proprietary drivers, casa_distro will add options to mount the host system drivers and OpenGL libraries into the container in order to have hardware 3D rendering.</p>
<p>Options are setup in the <code class="docutils literal notranslate"><span class="pre">casa_distro.json</span></code> file so you can check and edit them. Therefore, the detection of nvidia drivers is done on the host machine at the time of build workflow creation: if the build workflow is shared across several machines on a network, this config may not suit all machines running the container.</p>
<p>However it does not seem to work when ssh connections and remote display are involved.</p>
</section>
<section id="with-singularity">
<span id="sing-opengl"></span><h4>with singularity<a class="headerlink" href="#with-singularity" title="Link to this heading">¶</a></h4>
<p>There are several ways to use OpenGL in singularity, depending on the host system, the 3D hardware, the X server, the type of user/ssh connection.</p>
<p>Our container images include  a software-only Mesa implementation of OpenGL, which can be used if other solutions fail.</p>
<p>Casa-distro tries to use “reasonable” settings but cannot always detect the best option. Thus the user can control the behavior using the <code class="docutils literal notranslate"><span class="pre">opengl</span></code> option in <code class="docutils literal notranslate"><span class="pre">casa_distro</span> <span class="pre">run</span></code>, <code class="docutils literal notranslate"><span class="pre">casa_distro</span> <span class="pre">shell</span></code>, <code class="docutils literal notranslate"><span class="pre">casa_distro</span> <span class="pre">mrun</span></code> and <code class="docutils literal notranslate"><span class="pre">casa_distro</span> <span class="pre">bv_maker</span></code> subcommands. This option can take several values: <code class="docutils literal notranslate"><span class="pre">auto</span></code>, <code class="docutils literal notranslate"><span class="pre">container</span></code>, <code class="docutils literal notranslate"><span class="pre">nv</span></code>, or <code class="docutils literal notranslate"><span class="pre">software</span></code>. The default is, of course, <code class="docutils literal notranslate"><span class="pre">auto</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">auto</span></code>: performs auto-detection: same as <code class="docutils literal notranslate"><span class="pre">nv</span></code> if an NVidia device is detected on a host linux system, otherwise same as <code class="docutils literal notranslate"><span class="pre">container</span></code>, unless we detect a case where that is known to fail (in which case we would use <code class="docutils literal notranslate"><span class="pre">software</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">container</span></code>: passes no special options to Singularity: the mesa installed in the container is used</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nv</span></code> tries to mount the proprietary NVidia driver of the host (linux) system in the container</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">software</span></code> sets <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code> to use a software-only OpenGL rendering. This solution is the slowest but is a fallback when no other solution works.</p></li>
</ul>
<p>There are cases where the nvidia option makes things worse (see ssh connections below). If you ever need to disable the nvidia option, you can add an option <code class="docutils literal notranslate"><span class="pre">opengl=software</span></code> or <code class="docutils literal notranslate"><span class="pre">opengl=container</span></code> to <code class="docutils literal notranslate"><span class="pre">run</span></code>, <code class="docutils literal notranslate"><span class="pre">shell</span></code> and other subcommands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>casa_distro<span class="w"> </span>run<span class="w"> </span><span class="nv">gui</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">opengl</span><span class="o">=</span>software<span class="w"> </span>glxinfo
</pre></div>
</div>
<p>If it is OK, you can set this option in the build workflow <code class="docutils literal notranslate"><span class="pre">casa_distro.json</span></code> config, under the <code class="docutils literal notranslate"><span class="pre">&quot;container_gui_env&quot;</span></code> key:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
<span class="w">    </span><span class="s2">&quot;casa_distro_compatibility&quot;</span>:<span class="w"> </span><span class="s2">&quot;3&quot;</span>,
<span class="w">    </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;brainvida-5.0&quot;</span>,
<span class="w">    </span><span class="s2">&quot;image&quot;</span>:<span class="w"> </span><span class="s2">&quot;/home/bilbo/casa_distro/brainvisa-5.0.sif&quot;</span>,
<span class="w">    </span><span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="s2">&quot;user&quot;</span>,
<span class="w">    </span><span class="s2">&quot;system&quot;</span>:<span class="w"> </span><span class="s2">&quot;ubuntu-18.04&quot;</span>,
<span class="w">    </span><span class="s2">&quot;container_type&quot;</span>:<span class="w"> </span><span class="s2">&quot;singularity&quot;</span>,
<span class="w">    </span><span class="s2">&quot;distro&quot;</span>:<span class="w"> </span><span class="s2">&quot;brainvisa&quot;</span>,
<span class="w">    </span><span class="s2">&quot;container_options&quot;</span>:<span class="w"> </span><span class="o">[</span>
<span class="w">        </span><span class="s2">&quot;--softgl&quot;</span>,
<span class="w">    </span><span class="o">]</span>,
<span class="w">    </span><span class="c1"># ...</span>
<span class="o">}</span>
</pre></div>
</div>
<dl>
<dt>Via a ssh connection:</dt><dd><dl>
<dt>same host, different user:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">xhost</span> <span class="pre">+</span></code> must have been used on the host system. Works (as long as
the <code class="docutils literal notranslate"><span class="pre">XAUTHORITY</span></code> env variable points to the <code class="docutils literal notranslate"><span class="pre">.Xauthority</span></code> file from
the host user home directory).</p>
</dd>
<dt>different host:</dt><dd><p>I personally could not make it work using the <code class="docutils literal notranslate"><span class="pre">nv</span></code> option. But
actually outside of casa-distro or any container, it doesn’t work
either. Remote GLX rendering has always been a very delicate thing…</p>
<p>It works for me using the software Mesa rendering (slow). So at this point, using casa_distro actually makes it possible to render OpenGL when the host system cannot (or not directly)…</p>
</dd>
</dl>
</dd>
</dl>
</section>
</section>
<section id="on-macos-systems">
<span id="mac-sing-troubleshooting"></span><h3>On MacOS systems<a class="headerlink" href="#on-macos-systems" title="Link to this heading">¶</a></h3>
<section id="singularity-is-not-working-it-s-just-doing-nothing">
<h4>Singularity is not working, it’s just doing nothing<a class="headerlink" href="#singularity-is-not-working-it-s-just-doing-nothing" title="Link to this heading">¶</a></h4>
<p>Singularity for Mac is available as a beta at the time this document is written (but with no updates nor news in more than a year). It somewhat works but we sometimes ended up with a “silent” virtual machine which seems to do just nothing. But it should work in principle, and sometimes does ;)</p>
<p>We experienced this behaviour on MacOS 10.11 using Singularity Desktop 3.3-beta for Mac. We had to upgrade the system (to 10.15) and then it worked. But then after a few days became silent again, for certain users, using certain images… but it still worked for our BrainVisa images…</p>
</section>
<section id="gui-is-not-working-in-singularity">
<h4>GUI is not working in singularity<a class="headerlink" href="#gui-is-not-working-in-singularity" title="Link to this heading">¶</a></h4>
<p>Graphical commands (brainvisa, anatomist, others…) should run through a X11 server. Xquartz is installed in MacOS systems, but need to be started, and a bit configured.</p>
<ul>
<li><p>open Xquartz, either using the desktop / finder icon, or by running a X command such as:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>xhost<span class="w"> </span>+
</pre></div>
</div>
</li>
<li><p>in the Xquartz preferences menu, go to “security” and check the option to enable network connections (tcp) to the X server</p></li>
<li><p>quit the server, it needs to be restarted</p></li>
<li><dl>
<dt>run</dt><dd><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>xhost<span class="w"> </span>+
</pre></div>
</div>
<p>to enable other users / apps to use the graphical server (this will start Xquartz, if not already running). Note that this command needs to be run again each time the Xquartz server is stopped / restarted.</p>
</dd>
</dl>
</li>
<li><p>You should use the <code class="docutils literal notranslate"><span class="pre">opengl=software</span></code> option in <code class="docutils literal notranslate"><span class="pre">casa_distro</span></code> otherwise 3D will likely crash the programs.</p></li>
<li><p>now graphical applications should run inside singularity containers. 3D hardware is not used however, rendering is using a software rendering, so it is not fast.</p></li>
</ul>
</section>
<section id="virtualbox-images-are-crashing-when-booting">
<span id="mac-vbox-troubleshooting"></span><h4>VirtualBox images are crashing when booting<a class="headerlink" href="#virtualbox-images-are-crashing-when-booting" title="Link to this heading">¶</a></h4>
<p>I personally had trouble getting the VirtualBox image to actually run on MacOS 10.15. The virtual machine consistently crashed at boot time. After inspecting the logs I found out that the sound card support might be the cause, and I had to use a “fake sound device” in the virtualbox image settings. Then it appeared that all graphics display was notably slow (either 2D and 3D), whatever video / accelerated 3D support options. And icons and fonts in the virtual machine were microscopic, almost impossible to read, and difficult if even possible to configure in the linux desktop. The “zoom factor x2” option in virtualbox was very handy for that, but reduced the actual resolution by a factor of 2 if I understand. Apart from these limitations, the software was running.</p>
<p>We have a working install procedure from one of our friends using a Mac here:</p>
<p>On a Mac Book Pro, with MacOs 10.15.7 and 16Gb of memory:</p>
<ul>
<li><p>Install VirtualBox v 6.1</p></li>
<li><p>Import the Brainvisa VM</p></li>
<li><p>Disable sound (fake sound device)</p></li>
<li><p>Guests additions: run the Linux additions after mounting the CD and opening its contents.</p></li>
<li><p>Shutdown the virtual machine, go to its configuration, and in the ‘Display’ section, chose ‘Graphics Controller: VMSVGA’, tick ‘Activate 3D acceleration’ and increase the ‘Video memory’ to 128Mb.</p></li>
<li><p>setup shared directory to mount the computer filesystem (my user directory). For this I went into the ‘shared directory’ section of the VM configuration, and asked to have <code class="docutils literal notranslate"><span class="pre">/media/olivier</span></code> to point on my home directory (on my Mac: <code class="docutils literal notranslate"><span class="pre">/Users/olivier</span></code>) .</p></li>
<li><p>There is an issue to fix before accessing <code class="docutils literal notranslate"><span class="pre">/media/olivier</span></code>, because of a permission issue. It is fixed by typing the following into the terminal:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>usermod<span class="w"> </span>-aG<span class="w"> </span>vboxsf<span class="w"> </span><span class="k">$(</span>whoami<span class="k">)</span>
</pre></div>
</div>
</li>
<li><p>reboot the VM.</p></li>
<li><p>there is still a keyboard mapping issue, it can probably be fixed in the linux desktop config somewhere.</p></li>
</ul>
<p>Good to go !</p>
</section>
</section>
<section id="on-windows-systems">
<span id="win-sing-troubleshooting"></span><h3>On Windows systems<a class="headerlink" href="#on-windows-systems" title="Link to this heading">¶</a></h3>
<section id="installing-singularity-on-windows">
<h4>Installing Singularity on Windows<a class="headerlink" href="#installing-singularity-on-windows" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Singularity may be a bit touchy to install on Windows, it needs Windows 10 with linux subsystem (WSL2) plus other internal options (hyper-V something). It’s possible, not easy.</p></li>
<li><p>Once singularity is working, to be able to run graphical programs, a X server must be installed. Several ones exist for Windows, several are free, but most of them do not support hardware-accelerated 3D. <a class="reference external" href="https://sourceforge.net/projects/xming/">Xming</a> supports hardware acceleration, but has gone commercial. The latest free implementation was released in 2016, and seems to work. Microsoft is possibly working on another implementation.</p></li>
</ul>
</section>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Technical issues</a><ul>
<li><a class="reference internal" href="#home-directory-and-configuration-files-in-casa-distro-containers">Home directory and configuration files in casa-distro containers</a><ul>
<li><a class="reference internal" href="#configuration-files">Configuration files</a></li>
<li><a class="reference internal" href="#home-directory">Home directory</a></li>
</ul>
</li>
<li><a class="reference internal" href="#containers-and-distributed-execution">Containers and distributed execution</a></li>
<li><a class="reference internal" href="#developing-in-containers">Developing in containers</a><ul>
<li><a class="reference internal" href="#using-git">Using Git</a></li>
<li><a class="reference internal" href="#using-ssh">Using ssh</a></li>
</ul>
</li>
<li><a class="reference internal" href="#troubleshooting">Troubleshooting</a><ul>
<li><a class="reference internal" href="#opengl-is-not-working-or-is-slow">OpenGL is not working, or is slow</a><ul>
<li><a class="reference internal" href="#with-docker">with docker</a></li>
<li><a class="reference internal" href="#with-singularity">with singularity</a></li>
</ul>
</li>
<li><a class="reference internal" href="#on-macos-systems">On MacOS systems</a><ul>
<li><a class="reference internal" href="#singularity-is-not-working-it-s-just-doing-nothing">Singularity is not working, it’s just doing nothing</a></li>
<li><a class="reference internal" href="#gui-is-not-working-in-singularity">GUI is not working in singularity</a></li>
<li><a class="reference internal" href="#virtualbox-images-are-crashing-when-booting">VirtualBox images are crashing when booting</a></li>
</ul>
</li>
<li><a class="reference internal" href="#on-windows-systems">On Windows systems</a><ul>
<li><a class="reference internal" href="#installing-singularity-on-windows">Installing Singularity on Windows</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="concepts.html"
                          title="previous chapter">Casa-distro concepts</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="developer.html"
                          title="next chapter">Developing in the Casa-Distro BrainVISA environment</a></p>
  </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="developer.html" title="Developing in the Casa-Distro BrainVISA environment"
             >next</a></li>
        <li class="right" >
          <a href="concepts.html" title="Casa-distro concepts"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CASA-Distro</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Technical issues</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2017-2024, BrainVISA team &lt;contact@brainvisa.info&gt;.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.3.7.
    </div>
  </body>
</html>