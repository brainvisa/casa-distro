<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Casa-Distro &#8212; CASA-Distro - BrainVisa / CATI development distribution</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=808b3635" />
    
    <script src="_static/documentation_options.js?v=4f6ddb47"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Casa-distro concepts" href="concepts.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="concepts.html" title="Casa-distro concepts"
             accesskey="N">next</a></li>
        <li class="nav-item nav-item-0"><a href="#">CASA-Distro</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Casa-Distro</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="casa-distro">
<h1>Casa-Distro<a class="headerlink" href="#casa-distro" title="Link to this heading">¶</a></h1>
<p>If you want to install simply casa-distro as a user, you can directly see the <a class="extlink-bv reference external" href="../web-5.0/download.html">BrainVisa download / install section</a>.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<section id="what-is-casa">
<h3>What is CASA ?<a class="headerlink" href="#what-is-casa" title="Link to this heading">¶</a></h3>
<p>CASA = <a class="reference external" href="http://cati-neuroimaging.com">CATI</a> + <a class="reference external" href="http://brainvisa.info">BrainVISA</a></p>
<p>When these two projects decided to use the same development and software delivery environment, the name CASA was chosen to name this environment.</p>
</section>
<section id="what-is-casa-distro">
<h3>What is Casa-Distro ?<a class="headerlink" href="#what-is-casa-distro" title="Link to this heading">¶</a></h3>
<p><strong>Short answer:</strong> it’s the way to <strong>run or develop BrainVISA software</strong> in a containerized environment or a virtual machine.</p>
<p><strong>Longer answer:</strong></p>
<p>It’s a cross-platform environment which is used by users to install/use BrainVisa and CATI environments, and by developers to provide a common working development environment for BrainVISA and CATI tools. It avoids the manual installation of required development software and libraries, which can cause the use of different versions on different systems.
It was not unusual to discover differences of behaviour in software that was only due to diferrences between development environments. The more developers were involved in the projects, the more difficulties were encountered. It was become too difficult to maintain good quality software without a unified development environment.</p>
<p>Therefore, it was decided to create casa-distro to provide a complete development environment using a virtual appliance to host the compilation system. casa_distro will support two container technologies, <a class="reference external" href="https://www.sylabs.io/">Singularity</a> and <a class="reference external" href="https://www.docker.com">Docker</a> (soon) and one virtual machine technology : <a class="reference external" href="https://www.virtualbox.org/">VirtualBox</a>.</p>
<p><strong>Note</strong>: in version 3.0 the support for Docker has been temporarily dropped (but should come back as soon as possible).</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td></td>
<td><p>Singularity (version 3.x)</p></td>
<td><p>Docker</p></td>
<td><p>VirtualBox</p></td>
</tr>
<tr class="row-even"><td><p>Linux</p></td>
<td><p>✓</p></td>
<td><p><span class="grey">X</span></p></td>
<td><p>✓</p></td>
</tr>
<tr class="row-odd"><td><p>Windows</p></td>
<td><p>(✓ <a class="reference internal" href="technical.html#win-sing-troubleshooting"><span class="std std-ref">(1)</span></a>)</p></td>
<td><p><span class="grey">(X)</span></p></td>
<td><p>✓</p></td>
</tr>
<tr class="row-even"><td><p>Mac OS</p></td>
<td><p>✓ <a class="reference internal" href="technical.html#mac-sing-troubleshooting"><span class="std std-ref">(2)</span></a></p></td>
<td><p><span class="grey">(X)</span></p></td>
<td><p>✓ <a class="reference internal" href="technical.html#mac-vbox-troubleshooting"><span class="std std-ref">(3)</span></a></p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="casa-distro-for-users">
<h2>Casa-Distro for users<a class="headerlink" href="#casa-distro-for-users" title="Link to this heading">¶</a></h2>
<p>Users will use Casa-Distro to install and run <a class="reference external" href="http://brainvisa.info">BrainVISA</a> software.</p>
<p>See the <a class="extlink-bv reference external" href="../web-5.0/download.html">BrainVisa download / install section</a> explains how to install it.</p>
<p>The containerization allows to have a single binary distribution for all host operating systems and versions.</p>
</section>
<section id="casa-distro-for-developers">
<h2>Casa-Distro for developers<a class="headerlink" href="#casa-distro-for-developers" title="Link to this heading">¶</a></h2>
<section id="what-casa-distro-is-not">
<h3>What Casa-Distro is <strong>not</strong><a class="headerlink" href="#what-casa-distro-is-not" title="Link to this heading">¶</a></h3>
<p>Casa-Distro is not a build system: this is the job of <a class="extlink-bv-cmake reference external" href="../brainvisa-cmake-1.0/index.html">BrainVisa-Cmake</a>. Casa-distro brings a wrapper for the build system: it provides Docker images of Linux systems which contain <a class="extlink-bv-cmake reference external" href="../brainvisa-cmake-1.0/index.html">BrainVisa-Cmake</a> and many other thirdparty development tools and libraries, which are already setup for development and distribution of tools.</p>
<p>The user will be able to use the build system (<a class="extlink-bv-cmake reference external" href="../brainvisa-cmake-1.0/bv_maker.html">bv_maker</a>), inside Singularity, Docker, or VirtualBox, in a way that ensures to build, run, and ship software that is compatible with public distributions of BrainVisa.</p>
<p>See the <a class="reference internal" href="developer.html"><span class="doc">Developing in the Casa-Distro BrainVISA environment</span></a> documentation.</p>
</section>
</section>
<section id="installation-and-setup">
<span id="install"></span><h2>Installation and setup<a class="headerlink" href="#installation-and-setup" title="Link to this heading">¶</a></h2>
<p>Follow roughly the same procedure as for user setup, as axplained in: <a class="extlink-bv reference external" href="../web-5.0/download.html#developers-install">BrainVisa download / install section</a>.</p>
</section>
<section id="main-commands">
<h2>3 main commands<a class="headerlink" href="#main-commands" title="Link to this heading">¶</a></h2>
<section id="bv-command">
<h3><a class="reference internal" href="bv_command.html"><span class="doc">The bv command</span></a><a class="headerlink" href="#bv-command" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="bv_command.html"><span class="doc">The bv command</span></a> is the lightest, user-oriented command in casa-distro. It supports a single <a class="reference internal" href="concepts.html#environment"><span class="std std-ref">environment</span></a> and allows the minimum required to configure and run commands (or open a shell) in an installed environment container.</p>
</section>
<section id="casa-distro-command">
<h3><a class="reference internal" href="casa_distro_command.html"><span class="doc">The casa_distro command</span></a><a class="headerlink" href="#casa-distro-command" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="casa_distro_command.html"><span class="doc">The casa_distro command</span></a> supports multiple <a class="reference internal" href="concepts.html#environment"><span class="std std-ref">environments</span></a> using selection parameters (see <a class="reference internal" href="concepts.html"><span class="doc">Casa-distro concepts</span></a>) and allows also to run commands inside containers, but also to setup / install, manage, delete <a class="reference internal" href="concepts.html#environment"><span class="std std-ref">environments</span></a> and <a class="reference internal" href="concepts.html#image"><span class="std std-ref">container images</span></a>.</p>
</section>
<section id="casa-distro-admin-command">
<h3><a class="reference internal" href="casa_distro_admin_command.html"><span class="doc">The casa_distro_admin command</span></a><a class="headerlink" href="#casa-distro-admin-command" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="casa_distro_admin_command.html"><span class="doc">The casa_distro_admin command</span></a> is used to create new container images and publish them on a web server for other users.</p>
</section>
</section>
<section id="contents">
<h2>Contents<a class="headerlink" href="#contents" title="Link to this heading">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Casa-distro concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#repository">repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#environment">environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#environment-type">environment type</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#environment-name">environment name</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#distro">distro</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#system">system</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#branch">branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#version">version</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#image">image</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#image-version">image_version</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="technical.html">Technical issues</a><ul>
<li class="toctree-l2"><a class="reference internal" href="technical.html#home-directory-and-configuration-files-in-casa-distro-containers">Home directory and configuration files in casa-distro containers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="technical.html#configuration-files">Configuration files</a></li>
<li class="toctree-l3"><a class="reference internal" href="technical.html#home-directory">Home directory</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="technical.html#containers-and-distributed-execution">Containers and distributed execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="technical.html#developing-in-containers">Developing in containers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="technical.html#using-git">Using Git</a></li>
<li class="toctree-l3"><a class="reference internal" href="technical.html#using-ssh">Using ssh</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="technical.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="technical.html#opengl-is-not-working-or-is-slow">OpenGL is not working, or is slow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="technical.html#with-docker">with docker</a></li>
<li class="toctree-l4"><a class="reference internal" href="technical.html#with-singularity">with singularity</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="technical.html#on-macos-systems">On MacOS systems</a><ul>
<li class="toctree-l4"><a class="reference internal" href="technical.html#singularity-is-not-working-it-s-just-doing-nothing">Singularity is not working, it’s just doing nothing</a></li>
<li class="toctree-l4"><a class="reference internal" href="technical.html#gui-is-not-working-in-singularity">GUI is not working in singularity</a></li>
<li class="toctree-l4"><a class="reference internal" href="technical.html#virtualbox-images-are-crashing-when-booting">VirtualBox images are crashing when booting</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="technical.html#on-windows-systems">On Windows systems</a><ul>
<li class="toctree-l4"><a class="reference internal" href="technical.html#installing-singularity-on-windows">Installing Singularity on Windows</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="developer.html">Developing in the Casa-Distro BrainVISA environment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="developer.html#installation-and-setup">Installation and setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer.html#building-casa-projects">Building CASA projects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="developer.html#first-time">First time</a></li>
<li class="toctree-l3"><a class="reference internal" href="developer.html#update-the-casa-distro-command">Update the casa_distro command</a></li>
<li class="toctree-l3"><a class="reference internal" href="developer.html#bash-completion">Bash completion</a></li>
<li class="toctree-l3"><a class="reference internal" href="developer.html#updating-projects">Updating projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="developer.html#customizing-projects">Customizing projects</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="developer.html#casa-distro-concepts">Casa-Distro  concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer.html#administration">Administration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bv_command.html">The <code class="docutils literal notranslate"><span class="pre">bv</span></code> command</a></li>
<li class="toctree-l1"><a class="reference internal" href="casa_distro_command.html">The casa_distro command</a><ul>
<li class="toctree-l2"><a class="reference internal" href="casa_distro_command.html#common-parameters">Common parameters:</a></li>
<li class="toctree-l2"><a class="reference internal" href="casa_distro_command.html#commands">Commands:</a><ul>
<li class="toctree-l3"><a class="reference internal" href="casa_distro_command.html#help">help</a><ul>
<li class="toctree-l4"><a class="reference internal" href="casa_distro_command.html#parameters">Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="casa_distro_command.html#distro">distro</a></li>
<li class="toctree-l3"><a class="reference internal" href="casa_distro_command.html#list">list</a><ul>
<li class="toctree-l4"><a class="reference internal" href="casa_distro_command.html#id1">Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="casa_distro_command.html#run">run</a><ul>
<li class="toctree-l4"><a class="reference internal" href="casa_distro_command.html#id2">Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="casa_distro_command.html#pull-image">pull_image</a><ul>
<li class="toctree-l4"><a class="reference internal" href="casa_distro_command.html#id3">Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="casa_distro_command.html#shell">shell</a><ul>
<li class="toctree-l4"><a class="reference internal" href="casa_distro_command.html#id4">Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="casa_distro_command.html#mrun">mrun</a><ul>
<li class="toctree-l4"><a class="reference internal" href="casa_distro_command.html#id5">Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="casa_distro_command.html#bv-maker">bv_maker</a><ul>
<li class="toctree-l4"><a class="reference internal" href="casa_distro_command.html#id6">Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="casa_distro_command.html#the-complexity-of-arguments-parsing">The complexity of arguments parsing</a></li>
<li class="toctree-l2"><a class="reference internal" href="casa_distro_command.html#options-common-to-several-commands">Options common to several commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="casa_distro_command.html#environment-specification">Environment specification</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="casa_distro_command.html#environment-variables">Environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="casa_distro_command.html#environment-configuration-file">Environment configuration file</a><ul>
<li class="toctree-l3"><a class="reference internal" href="casa_distro_command.html#configuration-dictionary-variables">Configuration dictionary variables</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="casa_distro_admin_command.html">The casa_distro_admin command</a><ul>
<li class="toctree-l2"><a class="reference internal" href="casa_distro_admin_command.html#common-parameters">Common parameters:</a></li>
<li class="toctree-l2"><a class="reference internal" href="casa_distro_admin_command.html#commands">Commands:</a><ul>
<li class="toctree-l3"><a class="reference internal" href="casa_distro_admin_command.html#help">help</a><ul>
<li class="toctree-l4"><a class="reference internal" href="casa_distro_admin_command.html#parameters">Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="casa_distro_admin_command.html#singularity-deb">singularity_deb</a><ul>
<li class="toctree-l4"><a class="reference internal" href="casa_distro_admin_command.html#id1">Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="casa_distro_admin_command.html#create-base-image">create_base_image</a><ul>
<li class="toctree-l4"><a class="reference internal" href="casa_distro_admin_command.html#id2">Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="casa_distro_admin_command.html#publish-base-image">publish_base_image</a><ul>
<li class="toctree-l4"><a class="reference internal" href="casa_distro_admin_command.html#id3">Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="casa_distro_admin_command.html#create-user-image">create_user_image</a><ul>
<li class="toctree-l4"><a class="reference internal" href="casa_distro_admin_command.html#id4">Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="casa_distro_admin_command.html#publish-user-image">publish_user_image</a><ul>
<li class="toctree-l4"><a class="reference internal" href="casa_distro_admin_command.html#id5">Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="casa_distro_admin_command.html#bbi-daily">bbi_daily</a><ul>
<li class="toctree-l4"><a class="reference internal" href="casa_distro_admin_command.html#id6">Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="casa_distro_admin_command.html#local-install">local_install</a><ul>
<li class="toctree-l4"><a class="reference internal" href="casa_distro_admin_command.html#id7">Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="casa_distro_admin_command.html#convert-image">convert_image</a><ul>
<li class="toctree-l4"><a class="reference internal" href="casa_distro_admin_command.html#id8">Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="casa_distro_admin_command.html#images-and-releases-creation">Images and releases creation</a></li>
<li class="toctree-l2"><a class="reference internal" href="casa_distro_admin_command.html#creation-a-base-virtualbox-image">Creation a base VirtualBox image</a></li>
<li class="toctree-l2"><a class="reference internal" href="casa_distro_admin_command.html#managing-container-images">Managing container images</a><ul>
<li class="toctree-l3"><a class="reference internal" href="casa_distro_admin_command.html#singularity-and-docker">Singularity and Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="casa_distro_admin_command.html#sharing-images">Sharing images</a></li>
<li class="toctree-l3"><a class="reference internal" href="casa_distro_admin_command.html#designing-new-images">Designing new images</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="casa_distro_admin_command.html#creating-a-modified-brainvisa-distribution">Creating a modified BrainVISA distribution</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="nightly.html">Automated tests with bbi_daily</a><ul>
<li class="toctree-l2"><a class="reference internal" href="nightly.html#walkthrough">Walkthrough</a></li>
</ul>
</li>
</ul>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="#">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Casa-Distro</a><ul>
<li><a class="reference internal" href="#overview">Overview</a><ul>
<li><a class="reference internal" href="#what-is-casa">What is CASA ?</a></li>
<li><a class="reference internal" href="#what-is-casa-distro">What is Casa-Distro ?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#casa-distro-for-users">Casa-Distro for users</a></li>
<li><a class="reference internal" href="#casa-distro-for-developers">Casa-Distro for developers</a><ul>
<li><a class="reference internal" href="#what-casa-distro-is-not">What Casa-Distro is <strong>not</strong></a></li>
</ul>
</li>
<li><a class="reference internal" href="#installation-and-setup">Installation and setup</a></li>
<li><a class="reference internal" href="#main-commands">3 main commands</a><ul>
<li><a class="reference internal" href="#bv-command"><span class="xref std std-doc">bv_command</span></a></li>
<li><a class="reference internal" href="#casa-distro-command"><span class="xref std std-doc">casa_distro_command</span></a></li>
<li><a class="reference internal" href="#casa-distro-admin-command"><span class="xref std std-doc">casa_distro_admin_command</span></a></li>
</ul>
</li>
<li><a class="reference internal" href="#contents">Contents</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="concepts.html"
                          title="next chapter">Casa-distro concepts</a></p>
  </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="concepts.html" title="Casa-distro concepts"
             >next</a></li>
        <li class="nav-item nav-item-0"><a href="#">CASA-Distro</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Casa-Distro</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2017-2024, BrainVISA team &lt;contact@brainvisa.info&gt;.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.0.2.
    </div>
  </body>
</html>